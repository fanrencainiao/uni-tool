{"version":3,"sources":["webpack:///E:/tools/HBuilderX/workspace/tool/tm-vuetify/components/tm-upload/tm-upload.vue?812c","webpack:///E:/tools/HBuilderX/workspace/tool/tm-vuetify/components/tm-upload/tm-upload.vue?ed98","webpack:///E:/tools/HBuilderX/workspace/tool/tm-vuetify/components/tm-upload/tm-upload.vue?b3ce","webpack:///E:/tools/HBuilderX/workspace/tool/tm-vuetify/components/tm-upload/tm-upload.vue?f133","uni-app:///tm-vuetify/components/tm-upload/tm-upload.vue","webpack:///E:/tools/HBuilderX/workspace/tool/tm-vuetify/components/tm-upload/tm-upload.vue?b1d0","webpack:///E:/tools/HBuilderX/workspace/tool/tm-vuetify/components/tm-upload/tm-upload.vue?9958"],"names":[],"mappings":"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","file":"tm-vuetify/components/tm-upload/tm-upload.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./tm-upload.vue?vue&type=template&id=0af17bf9&scoped=true&\"\nvar renderjs\nimport script from \"./tm-upload.vue?vue&type=script&lang=js&\"\nexport * from \"./tm-upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tm-upload.vue?vue&type=style&index=0&id=0af17bf9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0af17bf9\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"tm-vuetify/components/tm-upload/tm-upload.vue\"\nexport default component.exports","export * from \"-!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tm-upload.vue?vue&type=template&id=0af17bf9&scoped=true&\"","var components\ntry {\n  components = {\n    tmIcons: function() {\n      return import(\n        /* webpackChunkName: \"tm-vuetify/components/tm-icons/tm-icons\" */ \"@/tm-vuetify/components/tm-icons/tm-icons.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.list, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    if (_vm.$scope.data.scopedSlotsCompiler === \"augmented\") {\n      _vm.$setScopedSlotsParams(\"img\", {\n        info: {\n          itemWidth: _vm.itemWidth,\n          itemHeight: _vm.itemHeight\n        }\n      })\n    }\n\n    return {\n      $orig: $orig\n    }\n  })\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event, item) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item\n\n      var _temp, _temp2\n\n      $event.stopPropagation()\n      return _vm.$tm.preview.previewImg(item.url, _vm.list, \"url\")\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tm-upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tm-upload.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"tm-upload flex-start \" id=\"tm-upload\">\r\n\t\t<view v-for=\"(item,index) in list\" :key=\"index\" class=\"tm-upload-item  \" :class=\"[grid!=1?'ma-4':'']\" :style=\"{\r\n\t\t\twidth:itemWidth+'px',\r\n\t\t\theight:itemHeight+'px'\r\n\t\t}\">\r\n\t\t\t<view v-if=\"!disabled\" class=\"tm-upload-del \" :class=\"[delDirection]\">\r\n\t\t\t\t<slot name=\"del\">\r\n\t\t\t\t\t<tm-icons @click=\"del(index)\" :black=\"black_tmeme\" name=\"icon-times-circle-fill\" size=\"36\" color=\"red\"></tm-icons>\r\n\t\t\t\t</slot>\r\n\t\t\t</view>\r\n\t\t\t<view @click.stop=\"$tm.preview.previewImg(item.url,list,'url')\" class=\"tm-upload-item-ck text flex-center  overflow\" \r\n\t\t\t:class=\"[color_tmeme,black_tmeme?'grey-darken-4 bk':'',`round-${round}`]\">\r\n\t\t\t\t<slot name=\"img\" :info={itemWidth,itemHeight}>\r\n\t\t\t\t\t<image :src=\"item.url\" :style=\"{\r\n\t\t\t\t\t\twidth:itemWidth+'px',\r\n\t\t\t\t\t\theight:itemHeight+'px'\r\n\t\t\t\t\t}\"></image>\r\n\t\t\t\t</slot>\r\n\t\t\t</view>\r\n\t\t\t<!-- 上传提示语。 -->\r\n\t\t\t<view v-if=\"tips&&!disabled\" class=\"tm-upload-tips text-size-xs round-b-2\"\r\n\t\t\t :class=\"[\r\n\t\t\t\t item.statusCode==2||item.statusCode==4?'red text':'',\r\n\t\t\t\t item.statusCode==1||item.statusCode==0?'black text':'',\r\n\t\t\t\t item.statusCode==3?color_tmeme+' text':'',\r\n\t\t\t\t black_tmeme?'bk':''\r\n\t\t\t ]\"\r\n\t\t\t >{{item.status}}</view>\r\n\t\t\t<!-- 上传的进度。 -->\r\n\t\t\t<view v-if=\"item.progress>0&&item.progress!=100&&!disabled\" class=\"tm-upload-pro green\"\r\n\t\t\t\t:style=\"{width:item.progress+'%'}\"></view>\r\n\t\t</view>\r\n\r\n\t\t<view  @click=\"addfile\" v-if=\"list.length<max&&!disabled&&showSheet\" class=\"tm-upload-item  ma-4 grey-lighten-4 \" :class=\"[`round-${round}`]\" :style=\"{\r\n\t\t\twidth:itemWidth+'px',\r\n\t\t\theight:itemHeight+'px'\r\n\t\t}\">\r\n\t\t\t<view class=\"tm-upload-item-ck border-a-0 flex-center  text \" :class=\"[color_tmeme,black_tmeme?'grey-darken-4 bk':'',`round-${round}`]\">\r\n\t\t\t\t<slot name=\"upload\">\r\n\t\t\t\t\t<tm-icons name=\"icon-plus\" size=\"36\" :color=\"color_tmeme\"></tm-icons>\r\n\t\t\t\t</slot>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/**\r\n\t * 上传图片组件\r\n\t * @property {Function} change 每一张图片上传成功都传动触发，并返回上传成功的图片列表。\r\n\t * @property {Function} del 删除一张图片时触发，返回当前删除的图片数据。\r\n\t * @property {Number|String} grid = [1|2|3|4|5] 默认：5，一行排几个。\r\n\t * @property {Number} code = [] 默认：0，服务器上传返回数据中表示成功的标志码。\r\n\t * @property {Number|String} img-height = [0] 默认：0，宽高相等。单位upx,自定义图片高度。\r\n\t * @property {Number|String} max = [9] 默认：9，最大上传数量\r\n\t * @property {String} del-direction = [left|right|center] 默认：right， 删除按钮的方向。left,right,center\r\n\t * @property {String|Boolean} disabled = [true|false] 默认：false， 如果禁用，会隐藏上传和删除按钮,只显示已上传的图片。\r\n\t * @property {String} url = [] 默认：\"\"，上传的地址。\r\n\t * @property {Array} filelist = [] 默认：[]，默认上传显示的图片。如果加上filelist.sync的话，会自动更新数据实现双向绑定。类似于v-model;\r\n\t * @property {String} url-key = [] 默认：\"\"，返回数据时，如果返回的是对象。则需要提供对象图像地址的key。默认没有，返回的即是图片地址。\r\n\t * @property {Object} header = [] 默认：{}，上传的头部参数。\r\n\t * @property {String} file-name = [file] 默认：file，上传时的文件key名。\r\n\t * @property {String} name = [] 默认：''，提交表单时的的字段名称标识\r\n\t * @property {Boolean|String} tips = [true|false] 默认：true，是否显示底部的上传提示语。上传中，失败等。\r\n\t * @property {Boolean|String} black = [true|false] 默认：null，暗黑模式。\r\n\t * @property {Boolean|String} auto-upload = [true|false] 默认：false，是否自动上传，即添加完图片后立即上传。\r\n\t * @property {Number|String} round = [] 默认：3，圆角\r\n\t * @property {Object} responseStu = [] 默认： {code:'code',//服务器返回的码的字段名称data:'data',//服务上传成功后返回 的数据字段名称msg:'msg'//服务器响应信息的字段名称。}，服务器响应结构字段映射表\r\n\t * @property {Number|String} maxsize = [] 默认：10*1024*1024，最大上传的图片大小，10mb大小\r\n\t * @example <tm-upload></tm-upload>\r\n\t * @description 可以通过refs.组件获得：addfile主动触发添加文件，stopupload停止上传，startupload开始或者继续上传，del删除一张图片。\r\n\t */\r\n\timport tmIcons from \"@/tm-vuetify/components/tm-icons/tm-icons.vue\"\r\n\texport default {\r\n\t\tcomponents:{tmIcons},\r\n\t\tname: \"tm-upload\",\r\n\t\tprops: {\r\n\t\t\tblack:{\r\n\t\t\t\ttype:Boolean|String,\r\n\t\t\t\tdefault:null\r\n\t\t\t},\r\n\t\t\t// 一行几个。\r\n\t\t\tgrid: {\r\n\t\t\t\ttype: String | Number,\r\n\t\t\t\tdefault: 5\r\n\t\t\t},\r\n\t\t\t// 默认0即为宽高相等。单位upx\r\n\t\t\timgHeight: {\r\n\t\t\t\ttype: String | Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\t// 最大上传数量，默认9\r\n\t\t\tmax: {\r\n\t\t\t\ttype: String | Number,\r\n\t\t\t\tdefault: 9\r\n\t\t\t},\r\n\t\t\t// 最大上传数量，默认9\r\n\t\t\tmaxsize: {\r\n\t\t\t\ttype: String | Number,\r\n\t\t\t\tdefault: 10*1024*1024\r\n\t\t\t},\r\n\t\t\t// 主题色\r\n\t\t\tcolor: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'primary'\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 删除按钮的方向。left,right,center\r\n\t\t\tdelDirection: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'right'\r\n\t\t\t},\r\n\t\t\t// 如果禁用，会隐藏上传和删除按钮。\r\n\t\t\tdisabled: String | Boolean,\r\n\t\t\t// 上传的地址。\r\n\t\t\turl: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\t// 默认上传显示的图片。如果加上filelist.sync的话，会自动更新数据实现双向绑定。类似于v-model;\r\n\t\t\tfilelist: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: () => {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//返回数据时，如果返回的是对象。则图像地址的key名。默认没有，返回的即是图片地址。\r\n\t\t\turlKey:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:''\r\n\t\t\t},\r\n\t\t\t// 上传的头部参数。\r\n\t\t\theader:{\r\n\t\t\t\ttype:Object,\r\n\t\t\t\tdefault:()=>{\r\n\t\t\t\t\treturn {};\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 上传时的文件key名。默认file\r\n\t\t\tfileName:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:'file'\r\n\t\t\t},\r\n\t\t\t// 是否显示底部的上传提示语。上传中，失败等。\r\n\t\t\ttips: {\r\n\t\t\t\ttype: Boolean|String,\r\n\t\t\t\tdefault: true,\r\n\t\t\t},\r\n\t\t\t// 是否自动上传，即添加完图片后立即上传。\r\n\t\t\tautoUpload: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false,\r\n\t\t\t},\r\n\t\t\t//提交表单时的的字段名称\r\n\t\t\tname:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:''\r\n\t\t\t},\r\n\t\t\tround:{\r\n\t\t\t\ttype:Number|String,\r\n\t\t\t\tdefault:3\r\n\t\t\t},\r\n\t\t\t// 跟随主题色的改变而改变。\r\n\t\t\tfllowTheme:{\r\n\t\t\t\ttype:Boolean|String,\r\n\t\t\t\tdefault:true\r\n\t\t\t},\r\n\t\t\t//定义上传成功返回的code码，默认是0表示上传成功 。\r\n\t\t\tcode:{\r\n\t\t\t\ttype:Number,\r\n\t\t\t\tdefault:0\r\n\t\t\t},\r\n\t\t\t//上成功后，服务器顺应数据的字段映射表。\r\n\t\t\tresponseStu:{\r\n\t\t\t\ttype:Object,\r\n\t\t\t\tdefault:()=>{\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tcode:'code',//服务器返回的码的字段名称\r\n\t\t\t\t\t\tdata:'data',//服务上传成功后返回 的数据字段名称\r\n\t\t\t\t\t\tmsg:'msg'//服务器响应信息的字段名称。\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\theader_obj:function () {\r\n\t\t\t\treturn this.header;\r\n\t\t\t},\r\n\t\t\tblack_tmeme: function() {\r\n\t\t\t\tif (this.black !== null) return this.black;\r\n\t\t\t\treturn this.$tm.vx.state().tmVuetify.black;\r\n\t\t\t},\r\n\t\t\tcolor_tmeme:function(){\r\n\t\t\t\tif(this.$tm.vx.state().tmVuetify.color!==null&&this.$tm.vx.state().tmVuetify.color && this.fllowTheme){\r\n\t\t\t\t\treturn this.$tm.vx.state().tmVuetify.color;\r\n\t\t\t\t}\r\n\t\t\t\treturn this.color;\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmaxWidth: 0,\r\n\t\t\t\titemWidth: 0,\r\n\t\t\t\titemHeight: 0,\r\n\t\t\t\tlist: [],\r\n\t\t\t\t//兼容app使用.\r\n\t\t\t\tshowSheet:true,\r\n\t\t\t\tupObje:null,\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t// #ifdef APP-VUE || APP-PLUS  || MP\r\n\t\t\tthis.showSheet = false;\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tasync mounted() {\r\n\t\t\tlet t = this;\r\n\t\t\t\r\n\t\t\tthis.$nextTick(async function(){\r\n\t\t\t\t\r\n\t\t\t\tthis.$Querey('.tm-upload', this,30).then(o=>{\r\n\t\t\t\t\t\t// #ifdef APP-VUE || APP-PLUS  || MP\r\n\t\t\t\t\t\tt.showSheet = true;\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\tt.maxWidth = o[0].width;\r\n\t\t\t\t\t\tlet itemWidth = (o[0].width - (parseInt(t.grid) - 1) * uni.upx2px(12)) / parseInt(t.grid);\r\n\t\t\t\t\t\tt.itemWidth = itemWidth;\r\n\t\t\t\t\t\tt.itemHeight = t.itemWidth;\r\n\t\t\t\t\t\tif (t.imgHeight > 0) {\r\n\t\t\t\t\t\t\tt.itemHeight = parseInt(uni.upx2px(t.imgHeight));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (typeof t.filelist === 'object' && Array.isArray(t.filelist)) {\r\n\t\t\t\t\t\t\tlet plist = [...t.filelist];\r\n\t\t\t\t\t\t\tplist.forEach((item, index) => {\r\n\t\t\t\t\t\t\t\tlet url = \"\";\r\n\t\t\t\t\t\t\t\tif (typeof item === 'string') {\r\n\t\t\t\t\t\t\t\t\turl = item;\r\n\t\t\t\t\t\t\t\t} else if (typeof item === 'object') {\r\n\t\t\t\t\t\t\t\t\turl = item[t.urlKey]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tt.list.push({\r\n\t\t\t\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\t\t\t\tstatus: \"上传成功\",\r\n\t\t\t\t\t\t\t\t\tprogress: 100,\r\n\t\t\t\t\t\t\t\t\tfileId: t.$tm.guid(),\r\n\t\t\t\t\t\t\t\t\tstatusCode: 3,\r\n\t\t\t\t\t\t\t\t\tdata: item,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//动态添加默认已上传的文件。\r\n\t\t\tpushFile(list){\r\n\t\t\t\tlet t= this;\r\n\t\t\t\tlet plist = list||[];\r\n\t\t\t\tplist.forEach((item, index) => {\r\n\t\t\t\t\tlet url = \"\";\r\n\t\t\t\t\tif (typeof item === 'string') {\r\n\t\t\t\t\t\turl = item;\r\n\t\t\t\t\t} else if (typeof item === 'object') {\r\n\t\t\t\t\t\turl = item[t.urlKey]\r\n\t\t\t\t\t}\r\n\t\t\t\t\tt.list.push({\r\n\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\tstatus: \"上传成功\",\r\n\t\t\t\t\t\tprogress: 100,\r\n\t\t\t\t\t\tfileId: t.$tm.guid(),\r\n\t\t\t\t\t\tstatusCode: 3,\r\n\t\t\t\t\t\tdata: item,\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync addfile() {\r\n\t\t\t\tif(this.disabled) return;\r\n\t\t\t\tlet t = this;\r\n\t\t\t\tlet maxfile = parseInt(this.max) - this.list.length;\r\n\t\t\t\tif (maxfile <= 0) {\r\n\t\t\t\t\tthis.$tm.toast(\"已达上传上限\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t};\r\n\t\t\t\tlet url = this.url;\r\n\t\t\t\tif(!this.upObje){\r\n\t\t\t\t\tthis.upObje = new this.$tm.upload.uploadfile({\r\n\t\t\t\t\t\topts:{header:this.header_obj,name:this.fileName},\r\n\t\t\t\t\t\tmaxfile:maxfile,\r\n\t\t\t\t\t\tuploadUrl:url,\r\n\t\t\t\t\t\tisAuto:this.autoUpload,\r\n\t\t\t\t\t\tmaxsize:this.maxsize,\r\n\t\t\t\t\t\tcode:this.code,\r\n\t\t\t\t\t\tresponseStu:this.responseStu\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 添加已有的图片。\r\n\t\t\t\t\tthis.upObje.addfile(this.list);\r\n\t\t\t\t\tthis.upObje.success = function(item){\r\n\t\t\t\t\t\tt.changeSuccess();\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.upObje.setConfig({maxsize:this.maxsize,maxfile:maxfile,code:this.code,responseStu:this.responseStu,opts:{header:this.header_obj,name:this.fileName}});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet clist = await this.upObje.chooesefile().catch(e=>{});\r\n\t\t\t\tif(clist){\r\n\t\t\t\t\tt.list = clist;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 停止下载\r\n\t\t\tstopupload(){\r\n\t\t\t\tif(this.disabled) return;\r\n\t\t\t\tif(this.upObje){\r\n\t\t\t\t\tthis.upObje.stop();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 继续上传或者开始上传。\r\n\t\t\tstartupload(){\r\n\t\t\t\tif(this.disabled) return;\r\n\t\t\t\tif(this.upObje){\r\n\r\n\t\t\t\t\tthis.upObje.start();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 删除一张图片。\r\n\t\t\tdel(index) {\r\n\t\t\t\tif(this.disabled) return;\r\n\t\t\t\tthis.$emit(\"del\",this.list[index])\r\n\t\t\t\tthis.list.splice(index, 1);\r\n\t\t\t\tthis.changeSuccess();\r\n\t\t\t},\r\n\t\t\t// 只有上传成功才会触发change。并更新发送数据。\r\n\t\t\tchangeSuccess() {\r\n\t\t\t\tlet filelist = [];\r\n\t\t\t\tthis.list.forEach((item, index) => {\r\n\t\t\t\t\tif (item.statusCode === 3) {\r\n\t\t\t\t\t\tfilelist.push(item.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.$emit('change', filelist);\r\n\t\t\t\tthis.$emit('update:filelist', filelist);\r\n\t\t\t},\r\n\t\t\t//获取已经上传的图像。\r\n\t\t\tgetFile(){\r\n\t\t\t\tlet filelist = [];\r\n\t\t\t\tthis.list.forEach((item, index) => {\r\n\t\t\t\t\tif (item.statusCode === 3) {\r\n\t\t\t\t\t\tfilelist.push(item.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn filelist;\r\n\t\t\t},\r\n\t\t\t//清除所有已上传的文件。\r\n\t\t\tclearAllFile(){\r\n\t\t\t\tif(this.disabled) return;\r\n\t\t\t\tthis.$emit(\"clear\",[])\r\n\t\t\t\tthis.list=[];\r\n\t\t\t\tthis.changeSuccess();\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.tm-upload {\r\n\t\tflex-flow: wrap;\r\n\r\n\t\t.tm-upload-item {\r\n\t\t\tposition: relative;\r\n\r\n\t\t\t.tm-upload-tips {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tz-index: 10;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\tbottom: 0;\r\n\t\t\t\theight: 40upx;\r\n\t\t\t\tline-height: 40upx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tfont-size: 23upx;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t.tm-upload-pro {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tz-index: 11;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\tbottom: 0;\r\n\t\t\t\theight: 6upx;\r\n\t\t\t\twidth: 0%;\r\n\t\t\t}\r\n\r\n\t\t\t.tm-upload-del {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tz-index: 10;\r\n\r\n\t\t\t\t&.right {\r\n\t\t\t\t\tright: -6upx;\r\n\t\t\t\t\ttop: -8upx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&.left {\r\n\t\t\t\t\tleft: -6upx;\r\n\t\t\t\t\ttop: -8upx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&.center {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tleft: 0;\r\n\t\t\t\t\ttop: 0;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.tm-upload-item-ck {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tm-upload.vue?vue&type=style&index=0&id=0af17bf9&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tm-upload.vue?vue&type=style&index=0&id=0af17bf9&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1648204019320\n      var cssReload = require(\"E:/tools/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}